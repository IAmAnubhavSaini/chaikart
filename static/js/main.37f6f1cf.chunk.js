(this["webpackJsonpchai-kart"]=this["webpackJsonpchai-kart"]||[]).push([[0],{13:function(t,e,c){},14:function(t,e,c){},16:function(t,e,c){"use strict";c.r(e);var n=c(2),r=c.n(n),a=c(8),i=c.n(a),o=(c(13),c(6)),s=c(3),u=c(1),d=(c(14),c(0));function l(t){return Object(d.jsxs)("div",{className:"product-list",children:[Object(d.jsx)("h2",{children:"Products"}),t.products.map((function(e,c){return Object(n.createElement)(j,Object(u.a)(Object(u.a)({},e),{},{key:"product-".concat(c)},t.actions))}))]})}function j(t){return Object(d.jsxs)("div",{className:"product",children:[Object(d.jsxs)("div",{className:"grid",children:[Object(d.jsx)("div",{className:"product-name",children:t.name}),Object(d.jsx)("div",{className:"product-price",children:t.price})]}),Object(d.jsx)("div",{className:"product-buttons",children:Object(d.jsx)("button",{onClick:function(){return t.onProductAdd({name:t.name,price:t.price})},children:"Add"})})]})}var b=[{name:"simple product",price:1299,quantity:99},{name:"medium product",price:1499,quantity:77},{name:"fancy product",price:1999,quantity:88},{name:"you cannot afford product",price:1299e6,quantity:9}];function p(t){var e=t.item;return Object(d.jsx)(d.Fragment,{children:""!==e.name&&Object(d.jsxs)("div",{className:"cart-item",children:[Object(d.jsxs)("div",{className:"product grid",children:[Object(d.jsx)("div",{className:"product-name",children:t.item.name}),Object(d.jsx)("div",{children:t.item.price})]}),Object(d.jsx)("div",{children:t.item.quantity}),Object(d.jsxs)("div",{children:[Object(d.jsx)("button",{onClick:function(){return t.onIncreaseQuantity(t.item)},children:"+1"}),Object(d.jsx)("button",{onClick:function(){return t.onDecreaseQuantity(t.item)},children:"-1"}),Object(d.jsx)("button",{onClick:function(){return t.onRemoveFromCart(t.item)},children:"delete"})]})]})})}function O(t){return Object(d.jsxs)("div",{className:"active-cart",children:[Object(d.jsx)("h2",{children:"cart"}),Object(d.jsx)("div",{children:t.activeCart.products.map((function(e,c){return Object(d.jsx)(p,Object(u.a)({item:e},t.productActions),"cart-item-".concat(c))}))}),Object(d.jsxs)("div",{children:[Object(d.jsxs)("span",{children:["Total: ",t.activeCart.total]}),Object(d.jsxs)("span",{children:["Count: ",t.activeCart.count]})]}),Object(d.jsxs)("div",{children:[Object(d.jsx)("button",{onClick:function(){return t.cartActions.onSuspendCart(t.activeCart)},children:"suspend"}),Object(d.jsx)("button",{onClick:t.cartActions.onClearActiveCart,children:"clear"})]})]})}function m(t){return Object(d.jsxs)("div",{className:"suspended-cart-list",children:[Object(d.jsx)("h2",{children:"suspended"}),t.carts.map((function(e,c){return Object(d.jsxs)("div",{className:"suspended-cart",children:[e.total,Object(d.jsx)("button",{onClick:function(){return t.actions.onMakeActive(e)},children:"make active"})]},"suspended-cart-".concat(c))}))]})}var v={id:1,products:[{name:"",quantity:0,price:0}],total:0,count:0};function h(t,e,c){var n=t.products,r=t.total,a=t.count,i=n.findIndex((function(t){return t.name===e.name}));if(console.log({products:n,productIndex:i,item:e,action:c}),"add"===c){if(-1===i){var o=e.quantity,d=void 0===o?1:o,l=e.price,j=e.name;return n.push({quantity:d,price:l,name:j}),r+=e.price,a+=1,Object(u.a)(Object(u.a)({},t),{},{products:n,total:r,count:a})}return h(t,e,"increase")}if("increase"===c){var b=n[i],p=b.quantity,O=b.price,m=b.name;return n[i]={quantity:p+1,price:O,name:m},a+=1,r+=e.price,Object(u.a)(Object(u.a)({},t),{},{products:n,total:r,count:a})}if("remove"===c){if(i>-1){var v=n[i];return n=[].concat(Object(s.a)(n.slice(0,i)),Object(s.a)(n.slice(i+1))),console.log(n),a-=v.quantity,r-=v.price*v.quantity,Object(u.a)(Object(u.a)({},t),{},{products:n,count:a,total:r})}}else if("decrease"===c&&i>-1){var x=n[i];return 1===x.quantity?h(t,e,"remove"):(a-=1,r-=x.price,n[i]=Object(u.a)({quantity:x.quantity-1},e),Object(u.a)(Object(u.a)({},t),{},{products:n,count:a,total:r}))}return Object(u.a)(Object(u.a)({},t),{},{products:n,count:a,total:r})}var x=function(){var t=Object(n.useState)(v),e=Object(o.a)(t,2),c=e[0],r=e[1],a=Object(n.useState)(!1),i=Object(o.a)(a,2),u=i[0],j=i[1],p=Object(n.useState)([]),x=Object(o.a)(p,2),f=x[0],C=x[1];return Object(d.jsxs)("div",{className:"App",children:[Object(d.jsx)("h2",{className:"brand",children:"ChaiKart"}),Object(d.jsxs)("div",{className:"grid",children:[b&&Object(d.jsx)(l,{products:b,actions:{onProductAdd:function(t){console.log("onProductAdd"),u||j(!0);var e=h(c,t,"add");r(e)}}}),u&&Object(d.jsx)(O,{activeCart:c,productActions:{onRemoveFromCart:function(t){console.log("onRemoveFromCart");var e=h(c,t,"remove");0===e.count&&j(!1),r(e)},onDecreaseQuantity:function(t){console.log("onDecreaseQuantity");var e=h(c,t,"decrease");0===e.count&&j(!1),r(e)},onIncreaseQuantity:function(t){console.log("onIncreaseQuantity"),console.log(t);var e=h(c,t,"increase");r(e),j(!0)}},cartActions:{onSuspendCart:function(t){console.log("onSuspendCart"),C([].concat(Object(s.a)(f),[t])),r(v),j(!1)},onClearActiveCart:function(){console.log("onClearActiveCart"),j(!1),r(v)}}}),f.length>0&&Object(d.jsx)(m,{actions:{onMakeActive:function(t){console.log("onMakeActive"),console.log(t);var e=f.findIndex((function(e){return e.id===t.id}));C([].concat(Object(s.a)(f.slice(0,e)),Object(s.a)(f.slice(e+1)))),r(t),j(!0)}},carts:f})]})]})},f=function(t){t&&t instanceof Function&&c.e(3).then(c.bind(null,17)).then((function(e){var c=e.getCLS,n=e.getFID,r=e.getFCP,a=e.getLCP,i=e.getTTFB;c(t),n(t),r(t),a(t),i(t)}))};i.a.render(Object(d.jsx)(r.a.StrictMode,{children:Object(d.jsx)(x,{})}),document.getElementById("root")),f()}},[[16,1,2]]]);
//# sourceMappingURL=main.37f6f1cf.chunk.js.map