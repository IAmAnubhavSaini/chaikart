{"version":3,"sources":["components/Product.tsx","data/products.ts","components/Cart.tsx","components/SuspendedCart.tsx","App.tsx","reportWebVitals.ts","index.tsx"],"names":["ProductList","props","className","products","map","product","index","Product","key","actions","name","price","onClick","onProductAdd","PRODUCTS","quantity","Cart","item","onIncreaseQuantity","onDecreaseQuantity","onRemoveFromCart","CartList","activeCart","productActions","total","count","cartActions","onSuspendCart","onClearActiveCart","SuspendedCartList","carts","cart","i","onMakeActive","initialCart","nextCart","prevCart","action","productIndex","findIndex","p","console","log","push","slice","App","useState","setActiveCart","showingCart","setShowingCart","suspendedCarts","setSuspendedCarts","cartItem","length","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.eb324c3d.chunk.js","sourcesContent":["import {ProductType} from \"../data/products\";\n\ntype ProductListProps = {\n    products: ProductType[];\n    actions: any;\n}\n\nfunction ProductList(props: ProductListProps) {\n    return (\n        <div className=\"product-list\">\n            {\n                props.products.map((product: ProductType, index: number) =>\n                    <Product {...product}\n                             key={`product-${index}`}\n                             {...props.actions}\n                    />)\n            }\n        </div>\n    );\n}\n\nfunction Product(props: any) {\n    return (\n        <div className=\"product\">\n            <div className={\"grid\"}>\n                <div className={\"product-name\"}>{props.name}</div>\n                <div className={\"product-price\"}>{props.price}</div>\n            </div>\n            <div className={\"product-buttons\"}>\n                <button onClick={() => props.onProductAdd({name: props.name, price: props.price})}>Add</button>\n            </div>\n        </div>\n    );\n}\n\nexport {\n    ProductList\n};\n","type ProductType = {\n    name: string;\n    price: number;\n    quantity: number;\n}\nconst PRODUCTS: ProductType[] = [\n    {name: \"simple product\", price: 1299, quantity: 99},\n    {name: \"medium product\", price: 1499, quantity: 77},\n    {name: \"fancy product\", price: 1999, quantity: 88},\n    {name: \"you cannot afford product\", price: 1299000000, quantity: 9},\n];\n\nexport {PRODUCTS};\nexport type {ProductType};\n","function Cart(props: any) {\n    const {item} = props;\n    return (<>\n        {\n            item.name !== '' &&\n            <div className={'cart-item'}>\n\n                <div className=\"product grid\">\n                    <div className=\"product-name\">{props.item.name}</div>\n                    <div>{props.item.price}</div>\n                </div>\n                <div>{props.item.quantity}</div>\n                <div>\n                    <button onClick={() => props.onIncreaseQuantity(props.item)}>+1</button>\n                    <button onClick={() => props.onDecreaseQuantity(props.item)}>-1</button>\n                    <button onClick={() => props.onRemoveFromCart(props.item)}>delete</button>\n                </div>\n\n            </div>\n        }\n    </>);\n}\n\nfunction CartList(props: any) {\n    return <div className={'active-cart'}>\n        <h2>cart</h2>\n        <div>\n            {props.activeCart.products.map((product: any, index: number) => {\n                return <Cart key={`cart-item-${index}`} item={product} {...props.productActions}/>;\n            })}\n        </div>\n        <div>\n            <span>Total: {props.total}</span>\n            <span>Count: {props.count}</span>\n        </div>\n        <div>\n            <button onClick={() => props.cartActions.onSuspendCart(props.activeCart)}>suspend</button>\n            <button onClick={props.cartActions.onClearActiveCart}>clear</button>\n        </div>\n    </div>;\n}\n\nexport {CartList};\n","function SuspendedCartList(props: any) {\n    return (\n        <div className={'suspended-cart-list'}>\n            <h2>suspended</h2>\n            {\n                props.carts.map((cart: any, i: number) => {\n                    return <div key={`suspended-cart-${i}`}\n                                className={'suspended-cart'}>\n                        {cart.total}\n                        <button onClick={() => props.actions.onMakeActive(cart)}>make active</button>\n                    </div>;\n                })\n            }\n\n        </div>\n    );\n}\n\nexport {SuspendedCartList};\n","import React, {useState} from 'react';\nimport './App.css';\nimport {ProductList} from \"./components/Product\";\nimport {PRODUCTS, ProductType} from \"./data/products\";\nimport {CartList} from \"./components/Cart\";\nimport {SuspendedCartList} from \"./components/SuspendedCart\";\n\ntype CartType = {\n    products: any[];\n    total: number;\n    count: number\n}\n\nconst initialCart: CartType = {\n    products: [\n        {name: '', quantity: 0, price: 0}\n    ],\n    total: 0,\n    count: 0\n};\n\nfunction nextCart(prevCart: any, item: any, action: string): CartType {\n    let {products, total, count} = prevCart;\n    const productIndex = products.findIndex((p: any) => p.name === item.name);\n    console.log({products, productIndex, item, action});\n    if (action === 'add') {\n        if (productIndex === -1) {\n            const {quantity = 1, price, name} = item;\n            products.push({quantity, price, name});\n            total += 1;\n            count += 1;\n            return {products, total, count};\n        } else {\n            return nextCart(prevCart, item, 'increase');\n        }\n    } else if (action === 'increase') {\n        const product = products[productIndex];\n        const {quantity, price, name} = product;\n        products[productIndex] = {quantity: quantity + 1, price, name};\n        count += 1;\n        total += 1;\n        return {products, total, count};\n    } else if (action === 'remove') {\n        if (productIndex > -1) {\n            const product = products[productIndex];\n            products = [...products.slice(0, productIndex), ...products.slice(productIndex + 1)];\n            console.log(products);\n            count -= product.quantity;\n            total -= (product.price * product.quantity);\n            return {products, count, total};\n        }\n    } else if (action === 'decrease') {\n        if (productIndex > -1) {\n            const product = products[productIndex];\n            if (product.quantity === 1) {\n                return nextCart(prevCart, item, 'remove');\n            }\n            count -= 1;\n            total -= product.price;\n            products[productIndex] = {quantity: product.quantity - 1, ...item};\n            return {products, count, total};\n        }\n    }\n    return {products, count, total};\n}\n\nfunction App() {\n    const [activeCart, setActiveCart] = useState(initialCart);\n    const [showingCart, setShowingCart] = useState(false);\n    const [suspendedCarts, setSuspendedCarts] = useState([]);\n\n    function onProductAdd(p: ProductType) {\n        console.log('onProductAdd');\n        if (!showingCart) {\n            setShowingCart(true);\n        }\n        const cart = nextCart(activeCart, p, 'add');\n        setActiveCart(cart);\n    }\n\n    function onIncreaseQuantity(cartItem: any) {\n        console.log('onIncreaseQuantity');\n        console.log(cartItem);\n        const cart = nextCart(activeCart, cartItem, 'increase');\n        setActiveCart(cart);\n        setShowingCart(true);\n    }\n\n    function onDecreaseQuantity(cartItem: any) {\n        console.log('onDecreaseQuantity');\n        const cart = nextCart(activeCart, cartItem, 'decrease');\n        if (cart.count === 0) {\n            setShowingCart(false);\n        }\n        setActiveCart(cart);\n    }\n\n    function onRemoveFromCart(cartItem: any) {\n        console.log('onRemoveFromCart');\n        const cart = nextCart(activeCart, cartItem, 'remove');\n        if (cart.count === 0) {\n            setShowingCart(false);\n        }\n        setActiveCart(cart);\n    }\n\n    function onClearActiveCart() {\n        console.log('onClearActiveCart');\n        setShowingCart(false);\n        setActiveCart(initialCart);\n    }\n\n    function onSuspendCart(cart: any) {\n        console.log('onSuspendCart');\n        // @ts-ignore\n        setSuspendedCarts([...suspendedCarts, cart]);\n        setActiveCart(initialCart);\n        setShowingCart(false);\n    }\n\n    function onMakeActive(cart: any) {\n        console.log('onMakeActive');\n        console.log(cart);\n        setActiveCart(cart);\n        setShowingCart(true);\n    }\n\n    return (\n        <div className=\"App\">\n            <h2>ChaiKart</h2>\n            <div className={\"grid\"}>\n\n                {PRODUCTS && <ProductList products={PRODUCTS} actions={{onProductAdd}}/>}\n                {showingCart &&\n                <CartList activeCart={activeCart}\n                          productActions={{onRemoveFromCart, onDecreaseQuantity, onIncreaseQuantity}}\n                          cartActions={{onSuspendCart, onClearActiveCart}}\n                />}\n                {\n                    suspendedCarts.length > 0 && <SuspendedCartList actions={{onMakeActive}} carts={suspendedCarts}/>\n                }\n            </div>\n        </div>\n    );\n}\n\nexport default App;\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}