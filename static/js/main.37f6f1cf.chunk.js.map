{"version":3,"sources":["components/Product.tsx","data/products.ts","components/Cart.tsx","components/SuspendedCart.tsx","App.tsx","reportWebVitals.ts","index.tsx"],"names":["ProductList","props","className","products","map","product","index","Product","key","actions","name","price","onClick","onProductAdd","PRODUCTS","quantity","Cart","item","onIncreaseQuantity","onDecreaseQuantity","onRemoveFromCart","CartList","activeCart","productActions","total","count","cartActions","onSuspendCart","onClearActiveCart","SuspendedCartList","carts","cart","i","onMakeActive","initialCart","id","nextCart","prevCart","action","productIndex","findIndex","p","console","log","push","slice","App","useState","setActiveCart","showingCart","setShowingCart","suspendedCarts","setSuspendedCarts","cartItem","length","sc","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.37f6f1cf.chunk.js","sourcesContent":["import {ProductType} from \"../data/products\";\n\ntype ProductListProps = {\n    products: ProductType[];\n    actions: any;\n}\n\nfunction ProductList(props: ProductListProps) {\n    return (\n        <div className=\"product-list\">\n            <h2>Products</h2>\n            {\n                props.products.map((product: ProductType, index: number) =>\n                    <Product {...product}\n                             key={`product-${index}`}\n                             {...props.actions}\n                    />)\n            }\n        </div>\n    );\n}\n\nfunction Product(props: any) {\n    return (\n        <div className=\"product\">\n            <div className={\"grid\"}>\n                <div className={\"product-name\"}>{props.name}</div>\n                <div className={\"product-price\"}>{props.price}</div>\n            </div>\n            <div className={\"product-buttons\"}>\n                <button onClick={() => props.onProductAdd({name: props.name, price: props.price})}>Add</button>\n            </div>\n        </div>\n    );\n}\n\nexport {\n    ProductList\n};\n","type ProductType = {\n    name: string;\n    price: number;\n    quantity: number;\n}\nconst PRODUCTS: ProductType[] = [\n    {name: \"simple product\", price: 1299, quantity: 99},\n    {name: \"medium product\", price: 1499, quantity: 77},\n    {name: \"fancy product\", price: 1999, quantity: 88},\n    {name: \"you cannot afford product\", price: 1299000000, quantity: 9},\n];\n\nexport {PRODUCTS};\nexport type {ProductType};\n","function Cart(props: any) {\n    const {item} = props;\n    return (<>\n        {\n            item.name !== '' &&\n            <div className={'cart-item'}>\n\n                <div className=\"product grid\">\n                    <div className=\"product-name\">{props.item.name}</div>\n                    <div>{props.item.price}</div>\n                </div>\n                <div>{props.item.quantity}</div>\n                <div>\n                    <button onClick={() => props.onIncreaseQuantity(props.item)}>+1</button>\n                    <button onClick={() => props.onDecreaseQuantity(props.item)}>-1</button>\n                    <button onClick={() => props.onRemoveFromCart(props.item)}>delete</button>\n                </div>\n\n            </div>\n        }\n    </>);\n}\n\nfunction CartList(props: any) {\n    return <div className={'active-cart'}>\n        <h2>cart</h2>\n        <div>\n            {props.activeCart.products.map((product: any, index: number) => {\n                return <Cart key={`cart-item-${index}`} item={product} {...props.productActions}/>;\n            })}\n        </div>\n        <div>\n            <span>Total: {props.activeCart.total}</span>\n            <span>Count: {props.activeCart.count}</span>\n        </div>\n        <div>\n            <button onClick={() => props.cartActions.onSuspendCart(props.activeCart)}>suspend</button>\n            <button onClick={props.cartActions.onClearActiveCart}>clear</button>\n        </div>\n    </div>;\n}\n\nexport {CartList};\n","function SuspendedCartList(props: any) {\n    return (\n        <div className={'suspended-cart-list'}>\n            <h2>suspended</h2>\n            {\n                props.carts.map((cart: any, i: number) => {\n                    return <div key={`suspended-cart-${i}`}\n                                className={'suspended-cart'}>\n                        {cart.total}\n                        <button onClick={() => props.actions.onMakeActive(cart)}>make active</button>\n                    </div>;\n                })\n            }\n\n        </div>\n    );\n}\n\nexport {SuspendedCartList};\n","import React, {useState} from 'react';\nimport './App.css';\nimport {ProductList} from \"./components/Product\";\nimport {PRODUCTS, ProductType} from \"./data/products\";\nimport {CartList} from \"./components/Cart\";\nimport {SuspendedCartList} from \"./components/SuspendedCart\";\n\ntype CartType = {\n    id: number;\n    products: any[];\n    total: number;\n    count: number\n}\n\nconst initialCart: CartType = {\n    id: 1,\n    products: [\n        {name: '', quantity: 0, price: 0}\n    ],\n    total: 0,\n    count: 0\n};\n\nfunction nextCart(prevCart: any, item: any, action: string): CartType {\n    let {products, total, count} = prevCart;\n    const productIndex = products.findIndex((p: any) => p.name === item.name);\n    console.log({products, productIndex, item, action});\n    if (action === 'add') {\n        if (productIndex === -1) {\n            const {quantity = 1, price, name} = item;\n            products.push({quantity, price, name});\n            total += item.price;\n            count += 1;\n            return {...prevCart, products, total, count};\n        } else {\n            return nextCart(prevCart, item, 'increase');\n        }\n    } else if (action === 'increase') {\n        const product = products[productIndex];\n        const {quantity, price, name} = product;\n        products[productIndex] = {quantity: quantity + 1, price, name};\n        count += 1;\n        total += item.price;\n        return {...prevCart, products, total, count};\n    } else if (action === 'remove') {\n        if (productIndex > -1) {\n            const product = products[productIndex];\n            products = [...products.slice(0, productIndex), ...products.slice(productIndex + 1)];\n            console.log(products);\n            count -= product.quantity;\n            total -= (product.price * product.quantity);\n            return {...prevCart, products, count, total};\n        }\n    } else if (action === 'decrease') {\n        if (productIndex > -1) {\n            const product = products[productIndex];\n            if (product.quantity === 1) {\n                return nextCart(prevCart, item, 'remove');\n            }\n            count -= 1;\n            total -= product.price;\n            products[productIndex] = {quantity: product.quantity - 1, ...item};\n            return {...prevCart, products, count, total};\n        }\n    }\n    return {...prevCart, products, count, total};\n}\n\nfunction App() {\n    const [activeCart, setActiveCart] = useState(initialCart);\n    const [showingCart, setShowingCart] = useState(false);\n    const [suspendedCarts, setSuspendedCarts] = useState([]);\n\n    function onProductAdd(p: ProductType) {\n        console.log('onProductAdd');\n        if (!showingCart) {\n            setShowingCart(true);\n        }\n        const cart = nextCart(activeCart, p, 'add');\n        setActiveCart(cart);\n    }\n\n    function onIncreaseQuantity(cartItem: any) {\n        console.log('onIncreaseQuantity');\n        console.log(cartItem);\n        const cart = nextCart(activeCart, cartItem, 'increase');\n        setActiveCart(cart);\n        setShowingCart(true);\n    }\n\n    function onDecreaseQuantity(cartItem: any) {\n        console.log('onDecreaseQuantity');\n        const cart = nextCart(activeCart, cartItem, 'decrease');\n        if (cart.count === 0) {\n            setShowingCart(false);\n        }\n        setActiveCart(cart);\n    }\n\n    function onRemoveFromCart(cartItem: any) {\n        console.log('onRemoveFromCart');\n        const cart = nextCart(activeCart, cartItem, 'remove');\n        if (cart.count === 0) {\n            setShowingCart(false);\n        }\n        setActiveCart(cart);\n    }\n\n    function onClearActiveCart() {\n        console.log('onClearActiveCart');\n        setShowingCart(false);\n        setActiveCart(initialCart);\n    }\n\n    function onSuspendCart(cart: any) {\n        console.log('onSuspendCart');\n        // @ts-ignore\n        setSuspendedCarts([...suspendedCarts, cart]);\n        setActiveCart(initialCart);\n        setShowingCart(false);\n    }\n\n    function onMakeActive(cart: any) {\n        console.log('onMakeActive');\n        console.log(cart);\n        // @ts-ignore\n        const findIndex = suspendedCarts.findIndex(sc => sc.id === cart.id);\n        setSuspendedCarts([...suspendedCarts.slice(0, findIndex), ...suspendedCarts.slice(findIndex + 1)]);\n        setActiveCart(cart);\n        setShowingCart(true);\n    }\n\n    return (\n        <div className=\"App\">\n            <h2 className=\"brand\">ChaiKart</h2>\n            <div className={\"grid\"}>\n\n                {PRODUCTS && <ProductList products={PRODUCTS} actions={{onProductAdd}}/>}\n                {showingCart &&\n                <CartList activeCart={activeCart}\n                          productActions={{onRemoveFromCart, onDecreaseQuantity, onIncreaseQuantity}}\n                          cartActions={{onSuspendCart, onClearActiveCart}}\n                />\n                }\n                {\n                    suspendedCarts.length > 0 && <SuspendedCartList actions={{onMakeActive}} carts={suspendedCarts}/>\n                }\n            </div>\n        </div>\n    );\n}\n\nexport default App;\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}