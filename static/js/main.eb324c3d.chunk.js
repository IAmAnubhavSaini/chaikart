(this["webpackJsonpchai-kart"]=this["webpackJsonpchai-kart"]||[]).push([[0],{13:function(t,e,c){},14:function(t,e,c){},16:function(t,e,c){"use strict";c.r(e);var n=c(1),r=c.n(n),i=c(8),a=c.n(i),o=(c(13),c(5)),s=c(2),u=c(6),d=(c(14),c(0));function l(t){return Object(d.jsx)("div",{className:"product-list",children:t.products.map((function(e,c){return Object(n.createElement)(j,Object(s.a)(Object(s.a)({},e),{},{key:"product-".concat(c)},t.actions))}))})}function j(t){return Object(d.jsxs)("div",{className:"product",children:[Object(d.jsxs)("div",{className:"grid",children:[Object(d.jsx)("div",{className:"product-name",children:t.name}),Object(d.jsx)("div",{className:"product-price",children:t.price})]}),Object(d.jsx)("div",{className:"product-buttons",children:Object(d.jsx)("button",{onClick:function(){return t.onProductAdd({name:t.name,price:t.price})},children:"Add"})})]})}var b=[{name:"simple product",price:1299,quantity:99},{name:"medium product",price:1499,quantity:77},{name:"fancy product",price:1999,quantity:88},{name:"you cannot afford product",price:1299e6,quantity:9}];function p(t){var e=t.item;return Object(d.jsx)(d.Fragment,{children:""!==e.name&&Object(d.jsxs)("div",{className:"cart-item",children:[Object(d.jsxs)("div",{className:"product grid",children:[Object(d.jsx)("div",{className:"product-name",children:t.item.name}),Object(d.jsx)("div",{children:t.item.price})]}),Object(d.jsx)("div",{children:t.item.quantity}),Object(d.jsxs)("div",{children:[Object(d.jsx)("button",{onClick:function(){return t.onIncreaseQuantity(t.item)},children:"+1"}),Object(d.jsx)("button",{onClick:function(){return t.onDecreaseQuantity(t.item)},children:"-1"}),Object(d.jsx)("button",{onClick:function(){return t.onRemoveFromCart(t.item)},children:"delete"})]})]})})}function m(t){return Object(d.jsxs)("div",{className:"active-cart",children:[Object(d.jsx)("h2",{children:"cart"}),Object(d.jsx)("div",{children:t.activeCart.products.map((function(e,c){return Object(d.jsx)(p,Object(s.a)({item:e},t.productActions),"cart-item-".concat(c))}))}),Object(d.jsxs)("div",{children:[Object(d.jsxs)("span",{children:["Total: ",t.total]}),Object(d.jsxs)("span",{children:["Count: ",t.count]})]}),Object(d.jsxs)("div",{children:[Object(d.jsx)("button",{onClick:function(){return t.cartActions.onSuspendCart(t.activeCart)},children:"suspend"}),Object(d.jsx)("button",{onClick:t.cartActions.onClearActiveCart,children:"clear"})]})]})}function v(t){return Object(d.jsxs)("div",{className:"suspended-cart-list",children:[Object(d.jsx)("h2",{children:"suspended"}),t.carts.map((function(e,c){return Object(d.jsxs)("div",{className:"suspended-cart",children:[e.total,Object(d.jsx)("button",{onClick:function(){return t.actions.onMakeActive(e)},children:"make active"})]},"suspended-cart-".concat(c))}))]})}var O={products:[{name:"",quantity:0,price:0}],total:0,count:0};function h(t,e,c){var n=t.products,r=t.total,i=t.count,a=n.findIndex((function(t){return t.name===e.name}));if(console.log({products:n,productIndex:a,item:e,action:c}),"add"===c){if(-1===a){var o=e.quantity,d=void 0===o?1:o,l=e.price,j=e.name;return n.push({quantity:d,price:l,name:j}),{products:n,total:r+=1,count:i+=1}}return h(t,e,"increase")}if("increase"===c){var b=n[a],p=b.quantity,m=b.price,v=b.name;return n[a]={quantity:p+1,price:m,name:v},{products:n,total:r+=1,count:i+=1}}if("remove"===c){if(a>-1){var O=n[a];return n=[].concat(Object(u.a)(n.slice(0,a)),Object(u.a)(n.slice(a+1))),console.log(n),{products:n,count:i-=O.quantity,total:r-=O.price*O.quantity}}}else if("decrease"===c&&a>-1){var x=n[a];return 1===x.quantity?h(t,e,"remove"):(i-=1,r-=x.price,n[a]=Object(s.a)({quantity:x.quantity-1},e),{products:n,count:i,total:r})}return{products:n,count:i,total:r}}var x=function(){var t=Object(n.useState)(O),e=Object(o.a)(t,2),c=e[0],r=e[1],i=Object(n.useState)(!1),a=Object(o.a)(i,2),s=a[0],j=a[1],p=Object(n.useState)([]),x=Object(o.a)(p,2),f=x[0],C=x[1];return Object(d.jsxs)("div",{className:"App",children:[Object(d.jsx)("h2",{children:"ChaiKart"}),Object(d.jsxs)("div",{className:"grid",children:[b&&Object(d.jsx)(l,{products:b,actions:{onProductAdd:function(t){console.log("onProductAdd"),s||j(!0);var e=h(c,t,"add");r(e)}}}),s&&Object(d.jsx)(m,{activeCart:c,productActions:{onRemoveFromCart:function(t){console.log("onRemoveFromCart");var e=h(c,t,"remove");0===e.count&&j(!1),r(e)},onDecreaseQuantity:function(t){console.log("onDecreaseQuantity");var e=h(c,t,"decrease");0===e.count&&j(!1),r(e)},onIncreaseQuantity:function(t){console.log("onIncreaseQuantity"),console.log(t);var e=h(c,t,"increase");r(e),j(!0)}},cartActions:{onSuspendCart:function(t){console.log("onSuspendCart"),C([].concat(Object(u.a)(f),[t])),r(O),j(!1)},onClearActiveCart:function(){console.log("onClearActiveCart"),j(!1),r(O)}}}),f.length>0&&Object(d.jsx)(v,{actions:{onMakeActive:function(t){console.log("onMakeActive"),console.log(t),r(t),j(!0)}},carts:f})]})]})},f=function(t){t&&t instanceof Function&&c.e(3).then(c.bind(null,17)).then((function(e){var c=e.getCLS,n=e.getFID,r=e.getFCP,i=e.getLCP,a=e.getTTFB;c(t),n(t),r(t),i(t),a(t)}))};a.a.render(Object(d.jsx)(r.a.StrictMode,{children:Object(d.jsx)(x,{})}),document.getElementById("root")),f()}},[[16,1,2]]]);
//# sourceMappingURL=main.eb324c3d.chunk.js.map