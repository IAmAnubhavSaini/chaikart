{"version":3,"sources":["components/Product.tsx","data/products.ts","components/Cart.tsx","components/SuspendedCart.tsx","App.tsx","reportWebVitals.ts","index.tsx"],"names":["ProductList","props","className","products","map","product","index","Product","key","actions","name","price","onClick","onProductAdd","PRODUCTS","quantity","Cart","item","onIncreaseQuantity","onDecreaseQuantity","onRemoveFromCart","CartList","activeCart","id","total","count","productActions","cartActions","onSuspendCart","onClearActiveCart","SuspendedCartList","carts","cart","i","onMakeActive","initialCart","nextCart","prevCart","action","productIndex","findIndex","p","push","slice","App","useState","setActiveCart","showingCart","setShowingCart","suspendedCarts","setSuspendedCarts","console","log","cartItem","length","sc","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.2c0d9ebb.chunk.js","sourcesContent":["import {ProductType} from \"../data/products\";\n\ntype ProductListProps = {\n    products: ProductType[];\n    actions: any;\n}\n\nfunction ProductList(props: ProductListProps) {\n    return (\n        <div className=\"product-list\">\n            <h2>Products</h2>\n            {\n                props.products.map((product: ProductType, index: number) =>\n                    <Product {...product}\n                             key={`product-${index}`}\n                             {...props.actions}\n                    />)\n            }\n        </div>\n    );\n}\n\nfunction Product(props: any) {\n    return (\n        <div className=\"product\">\n            <div className={\"grid\"}>\n                <div className={\"product-name\"}>{props.name}</div>\n                <div className={\"product-price\"}>{props.price}</div>\n            </div>\n            <div className={\"product-buttons\"}>\n                <button onClick={() => props.onProductAdd({name: props.name, price: props.price})}>Add</button>\n            </div>\n        </div>\n    );\n}\n\nexport {\n    ProductList\n};\n","type ProductType = {\n    name: string;\n    price: number;\n    quantity: number;\n}\nconst PRODUCTS: ProductType[] = [\n    {name: \"simple product\", price: 1299, quantity: 99},\n    {name: \"medium product\", price: 1499, quantity: 77},\n    {name: \"fancy product\", price: 1999, quantity: 88},\n    {name: \"you cannot afford product\", price: 1299000000, quantity: 9},\n];\n\nexport {PRODUCTS};\nexport type {ProductType};\n","function Cart(props: any) {\n    const {item} = props;\n    return (<>\n        {\n            item.name !== '' &&\n            <div className={'cart-item'}>\n                <div className=\"product grid\">\n\n                    <div className=\"product-name\">\n\n                        {props.item.name}\n                    </div>\n                    <div>{props.item.price} <span className={'cart-item-quantity'}>x{props.item.quantity}</span></div>\n                </div>\n\n                <div>\n                    <button onClick={() => props.onIncreaseQuantity(props.item)}>+1</button>\n                    <button onClick={() => props.onDecreaseQuantity(props.item)}>-1</button>\n                    <button onClick={() => props.onRemoveFromCart(props.item)}>delete</button>\n                </div>\n\n            </div>\n        }\n    </>);\n}\n\nfunction CartList(props: any) {\n    return <div className={'active-cart'}>\n        <h2>Cart #{props.activeCart.id}</h2>\n        <div className=\"cart-info-container drag-down drag-right\">\n            <div className={'cart-total'}>Total: <span className={'value'}>{props.activeCart.total}</span></div>\n            <div className={'cart-quantity'}>Count: <span className={'value'}>{props.activeCart.count}</span></div>\n        </div>\n        <div>\n            {props.activeCart.products.map((product: any, index: number) => {\n                return <Cart key={`cart-item-${index}`} item={product} {...props.productActions}/>;\n            })}\n        </div>\n\n        <div className=\"cart-action-container drag-down\">\n            <button onClick={() => props.cartActions.onSuspendCart(props.activeCart)}>suspend</button>\n            <button onClick={props.cartActions.onClearActiveCart}>clear</button>\n        </div>\n    </div>;\n}\n\nexport {CartList};\n","function SuspendedCartList(props: any) {\n    return (\n        <div className={'suspended-cart-list'}>\n            <h2>suspended</h2>\n            {\n                props.carts.map((cart: any, i: number) => {\n                    return <div key={`suspended-cart-${i}`}\n                                className={'suspended-cart'}>\n                        {cart.total}\n                        <button onClick={() => props.actions.onMakeActive(cart)}>make active</button>\n                    </div>;\n                })\n            }\n\n        </div>\n    );\n}\n\nexport {SuspendedCartList};\n","import React, {useState} from 'react';\nimport './App.css';\nimport {ProductList} from \"./components/Product\";\nimport {PRODUCTS, ProductType} from \"./data/products\";\nimport {CartList} from \"./components/Cart\";\nimport {SuspendedCartList} from \"./components/SuspendedCart\";\n\ntype CartType = {\n    id: number;\n    products: any[];\n    total: number;\n    count: number\n}\n\nconst initialCart: CartType = {\n    id: 1,\n    products: [\n        {name: '', quantity: 0, price: 0}\n    ],\n    total: 0,\n    count: 0\n};\n\nfunction nextCart(prevCart: any, item: any, action: string): CartType {\n    let {products, total, count, id} = prevCart;\n    if (action === 'clear-cart') {\n        return {id, products: [], count: 0, total: 0};\n    }\n    const productIndex = products.findIndex((p: any) => p.name === item.name);\n    // console.log({products, productIndex, item, action});\n    if (action === 'add') {\n        if (productIndex === -1) {\n            const {quantity = 1, price, name} = item;\n            products.push({quantity, price, name});\n            total += item.price;\n            count += 1;\n            return {...prevCart, products, total, count};\n        } else {\n            return nextCart(prevCart, item, 'increase');\n        }\n    } else if (action === 'increase') {\n        const product = products[productIndex];\n        const {quantity, price, name} = product;\n        products[productIndex] = {quantity: quantity + 1, price, name};\n        count += 1;\n        total += item.price;\n        return {id, products, total, count};\n    } else if (action === 'remove') {\n        if (productIndex > -1) {\n            const product = products[productIndex];\n            count -= product.quantity;\n            total -= (product.price * product.quantity);\n            products = [...products.slice(0, productIndex), ...products.slice(productIndex + 1)];\n            return {id, products, count, total};\n        }\n    } else if (action === 'decrease') {\n        if (productIndex > -1) {\n            const product = products[productIndex];\n            if (product.quantity === 1) {\n                return nextCart(prevCart, item, 'remove');\n            }\n            count -= 1;\n            total -= product.price;\n            products[productIndex] = {quantity: product.quantity - 1, ...item};\n            return {id, products, count, total};\n        }\n    }\n    return {id, products, count, total};\n}\n\nfunction App() {\n    const [activeCart, setActiveCart] = useState(initialCart);\n    const [showingCart, setShowingCart] = useState(false);\n    const [suspendedCarts, setSuspendedCarts] = useState([]);\n\n    function onProductAdd(p: ProductType) {\n        console.log('onProductAdd');\n        if (!showingCart) {\n            setShowingCart(true);\n        }\n        const cart = nextCart(activeCart, p, 'add');\n        setActiveCart(cart);\n    }\n\n    function onIncreaseQuantity(cartItem: any) {\n        console.log('onIncreaseQuantity');\n        console.log(cartItem);\n        const cart = nextCart(activeCart, cartItem, 'increase');\n        setActiveCart(cart);\n        setShowingCart(true);\n    }\n\n    function onDecreaseQuantity(cartItem: any) {\n        console.log('onDecreaseQuantity');\n        const cart = nextCart(activeCart, cartItem, 'decrease');\n        if (cart.count === 0) {\n            setShowingCart(false);\n        }\n        setActiveCart(cart);\n    }\n\n    function onRemoveFromCart(cartItem: any) {\n        console.log('onRemoveFromCart');\n        const cart = nextCart(activeCart, cartItem, 'remove');\n        if (cart.count === 0) {\n            setShowingCart(false);\n        }\n        setActiveCart(cart);\n    }\n\n    function onClearActiveCart() {\n        console.log('onClearActiveCart');\n        const cart = nextCart(activeCart, null, 'clear-cart');\n        setActiveCart(cart);\n        setShowingCart(false);\n    }\n\n    function onSuspendCart(cart: any) {\n        console.log('onSuspendCart');\n        // @ts-ignore\n        setSuspendedCarts([...suspendedCarts, cart]);\n        setActiveCart(initialCart);\n        setShowingCart(false);\n    }\n\n    function onMakeActive(cart: any) {\n        console.log('onMakeActive');\n        console.log(cart);\n        // @ts-ignore\n        const findIndex = suspendedCarts.findIndex(sc => sc.id === cart.id);\n        setSuspendedCarts([...suspendedCarts.slice(0, findIndex), ...suspendedCarts.slice(findIndex + 1)]);\n        setActiveCart(cart);\n        setShowingCart(true);\n    }\n\n    return (\n        <div className=\"App\">\n            <h2 className=\"brand\">ChaiKart</h2>\n            <div className={\"grid\"}>\n\n                {PRODUCTS && <ProductList products={PRODUCTS} actions={{onProductAdd}}/>}\n                {showingCart &&\n                <CartList activeCart={activeCart}\n                          productActions={{onRemoveFromCart, onDecreaseQuantity, onIncreaseQuantity}}\n                          cartActions={{onSuspendCart, onClearActiveCart}}\n                />\n                }\n                {\n                    suspendedCarts.length > 0 && <SuspendedCartList actions={{onMakeActive}} carts={suspendedCarts}/>\n                }\n            </div>\n        </div>\n    );\n}\n\nexport default App;\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}